/*! OOjs v1.1.10 | http://oojs.mit-license.org */
!function(a){"use strict";function b(a,b,c){var d,e,f,g={},h=[];for(d=0,e=b.length;e>d;d++)g[b[d]]=!0;for(d=0,e=a.length;e>d;d++)f=!!g[a[d]],f===c&&h.push(a[d]);return h}var c={},d=c.hasOwnProperty,e=c.toString,f=Object.create||function(){function a(){}return function(b,c){var e;return a.prototype=b,e=new a,c&&d.call(c,"constructor")&&(e.constructor=c.constructor.value),e}}();c.initClass=function(a){a["static"]=a["static"]||{}},c.inheritClass=function(a,b){var d;if(a.prototype instanceof b)throw new Error("Target already inherits from origin");d=a.prototype.constructor,a["super"]=a.parent=b,a.prototype=f(b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c.initClass(b),a["static"]=f(b["static"])},c.mixinClass=function(a,b){var e;for(e in b.prototype)"constructor"!==e&&d.call(b.prototype,e)&&(a.prototype[e]=b.prototype[e]);if(c.initClass(a),b["static"])for(e in b["static"])d.call(b["static"],e)&&(a["static"][e]=b["static"][e]);else c.initClass(b)},c.getProp=function(a){var b,c=a;for(b=1;b<arguments.length;b++){if(void 0===c||null===c)return void 0;c=c[arguments[b]]}return c},c.setProp=function(a){var b,c=a;if(Object(a)===a){for(b=1;b<arguments.length-2;b++){if(void 0===c[arguments[b]]&&(c[arguments[b]]={}),Object(c[arguments[b]])!==c[arguments[b]])return;c=c[arguments[b]]}c[arguments[arguments.length-2]]=arguments[arguments.length-1]}},c.cloneObject=function(a){var b,c;c=f(a.constructor.prototype);for(b in a)d.call(a,b)&&(c[b]=a[b]);return c},c.getObjectValues=function(a){var b,c;if(a!==Object(a))throw new TypeError("Called on non-object");c=[];for(b in a)d.call(a,b)&&(c[c.length]=a[b]);return c},c.binarySearch=function(a,b,c){for(var d,e,f=0,g=a.length;g>f;)if(d=f+g>>1,e=b(a[d]),0>e)g=d;else{if(!(e>0))return d;f=d+1}return c?g:null},c.compare=function(a,b,e){var f,g,h,i,j;if(a===b)return!0;if(a=a||{},b=b||{},"number"==typeof a.nodeType&&"function"==typeof a.isEqualNode)return a.isEqualNode(b);for(j in a)if(d.call(a,j)&&void 0!==a[j]&&a[j]!==b[j]&&(f=a[j],g=b[j],h=typeof f,i=typeof g,h!==i||("string"===h||"number"===h||"boolean"===h)&&f!==g||f===Object(f)&&!c.compare(f,g,!0)))return!1;return e?!0:c.compare(b,a,!0)},c.copy=function(a,b,d){var e,f;if(d&&(f=d(a),void 0!==f))return f;if(Array.isArray(a))f=new Array(a.length);else{if(a&&"function"==typeof a.clone)return b?b(a.clone()):a.clone();if(a&&"function"==typeof a.cloneNode)return b?b(a.cloneNode(!0)):a.cloneNode(!0);if(!c.isPlainObject(a))return b?b(a):a;f={}}for(e in a)f[e]=c.copy(a[e],b,d);return f},c.getHash=function(a){return JSON.stringify(a,c.getHash.keySortReplacer)},c.getHash.keySortReplacer=function(a,b){var c,d,e,f;if(b&&"function"==typeof b.getHashObject&&(b=b.getHashObject()),Array.isArray(b)||Object(b)!==b)return b;for(c={},d=Object.keys(b).sort(),e=0,f=d.length;f>e;e+=1)c[d[e]]=b[d[e]];return c},c.unique=function(a){return a.reduce(function(a,b){return-1===a.indexOf(b)&&a.push(b),a},[])},c.simpleArrayUnion=function(){var a,b,c,d,e,f={},g=[];for(a=0,b=arguments.length;b>a;a++)for(c=arguments[a],d=0,e=c.length;e>d;d++)f[c[d]]||(f[c[d]]=!0,g.push(c[d]));return g},c.simpleArrayIntersection=function(a,c){return b(a,c,!0)},c.simpleArrayDifference=function(a,c){return b(a,c,!1)},c.isPlainObject=function(a){if(!a||"[object Object]"!==e.call(a)||a.nodeType||null!=a&&a==a.window)return!1;try{if(a.constructor&&!d.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},function(){function a(a,b){if("string"==typeof a){if(void 0===b||null===b)throw new Error('Method name "'+a+'" has no context.');if("function"!=typeof b[a])throw new Error('Property "'+a+'" is not a function')}else if("function"!=typeof a)throw new Error("Invalid callback. Function or method name expected.")}c.EventEmitter=function(){this.bindings={}},c.initClass(c.EventEmitter),c.EventEmitter.prototype.on=function(b,c,e,f){var g;return a(c,f),g=d.call(this.bindings,b)?this.bindings[b]:this.bindings[b]=[],g.push({method:c,args:e,context:arguments.length<4?null:f}),this},c.EventEmitter.prototype.once=function(a,b){var c=this,d=function(){return c.off(a,d),b.apply(this,arguments)};return this.on(a,d)},c.EventEmitter.prototype.off=function(b,c,e){var f,g;if(1===arguments.length)return delete this.bindings[b],this;if(a(c,e),!d.call(this.bindings,b)||!this.bindings[b].length)return this;for(arguments.length<3&&(e=null),g=this.bindings[b],f=g.length;f--;)g[f].method===c&&g[f].context===e&&g.splice(f,1);return 0===g.length&&delete this.bindings[b],this},c.EventEmitter.prototype.emit=function(a){var b,c,e,f,g,h=[];if(d.call(this.bindings,a)){for(f=this.bindings[a].slice(),b=1,c=arguments.length;c>b;b++)h.push(arguments[b]);for(b=0,c=f.length;c>b;b++)e=f[b],g="string"==typeof e.method?e.context[e.method]:e.method,g.apply(e.context,e.args?e.args.concat(h):h);return!0}return!1},c.EventEmitter.prototype.connect=function(a,b){var c,d,e;for(e in b)c=b[e],Array.isArray(c)?(d=c.slice(1),c=c[0]):d=[],this.on(e,c,d,a);return this},c.EventEmitter.prototype.disconnect=function(a,b){var c,d,e,f;if(b)for(d in b)e=b[d],Array.isArray(e)&&(e=e[0]),this.off(d,e,a);else for(d in this.bindings)for(f=this.bindings[d],c=f.length;c--;)f[c]&&f[c].context===a&&this.off(d,f[c].method,a);return this}}(),function(){function a(a,b){return void 0===b||0>b||b>=a.length?a.length:b}c.EmitterList=function(){this.items=[],this.aggregateItemEvents={}},c.EmitterList.prototype.getItems=function(){return this.items.slice(0)},c.EmitterList.prototype.getItemIndex=function(a){return this.items.indexOf(a)},c.EmitterList.prototype.getItemCount=function(){return this.items.length},c.EmitterList.prototype.isEmpty=function(){return!this.items.length},c.EmitterList.prototype.aggregate=function(a){var b,c,d,e,f,g;for(f in a){if(g=a[f],Object.prototype.hasOwnProperty.call(this.aggregateItemEvents,f)){if(g)throw new Error("Duplicate item event aggregation for "+f);for(b=0;b<this.items.length;b++)c=this.items[b],c.connect&&c.disconnect&&(e={},e[f]=["emit",this.aggregateItemEvents[f],c],c.disconnect(this,e));delete this.aggregateItemEvents[f]}if(g)for(this.aggregateItemEvents[f]=g,b=0;b<this.items.length;b++)c=this.items[b],c.connect&&c.disconnect&&(d={},d[f]=["emit",g,c],c.connect(this,d))}},c.EmitterList.prototype.addItems=function(b,c){var d,e;if(Array.isArray(b)||(b=[b]),0===b.length)return this;for(c=a(this.items,c),d=0;d<b.length;d++)e=this.items.indexOf(b[d]),-1!==e?(c=this.moveItem(b[d],c),this.emit("move",b[d],c,e)):(c=this.insertItem(b[d],c),this.emit("add",b[d],c)),c++;return this},c.EmitterList.prototype.moveItem=function(b,c){var d=this.items.indexOf(b);if(-1===d)throw new Error("Item cannot be moved, because it is not in the list.");return c=a(this.items,c),this.items.splice(d,1),c--,this.items.splice(c,0,b),c},c.EmitterList.prototype.insertItem=function(b,c){var d,e;if(b.connect&&b.disconnect){d={};for(e in this.aggregateItemEvents)d[e]=["emit",this.aggregateItemEvents[e],b];b.connect(this,d)}return c=a(this.items,c),this.items.splice(c,0,b),c},c.EmitterList.prototype.removeItems=function(a){var b,c,d;if(Array.isArray(a)||(a=[a]),0===a.length)return this;for(b=0;b<a.length;b++)c=a[b],d=this.items.indexOf(c),-1!==d&&(c.connect&&c.disconnect&&c.disconnect(this),this.items.splice(d,1),this.emit("remove",c,d));return this},c.EmitterList.prototype.clearItems=function(){var a,b,c=this.items.splice(0,this.items.length);for(a=0;a<c.length;a++)b=c[a],b.connect&&b.disconnect&&b.disconnect(this);return this.emit("clear"),this}}(),c.SortedEmitterList=function(a){c.EmitterList.call(this),this.sortingCallback=a,this.aggregate({sortChange:"itemSortChange"}),this.connect(this,{itemSortChange:"onItemSortChange"})},c.mixinClass(c.SortedEmitterList,c.EmitterList),c.SortedEmitterList.prototype.onItemSortChange=function(a){this.removeItems(a),this.addItems(a)},c.SortedEmitterList.prototype.setSortingCallback=function(a){var b=this.getItems();this.sortingCallback=a,this.clearItems(),this.addItems(b)},c.SortedEmitterList.prototype.addItems=function(a){var b,c,d;if(Array.isArray(a)||(a=[a]),0===a.length)return this;for(c=0;c<a.length;c++)d=this.findInsertionIndex(a[c]),d<=this.items.length&&this.items[d]&&0===this.sortingCallback(this.items[d],a[c])&&this.removeItems(this.items[d]),b=this.insertItem(a[c],d),this.emit("add",a[c],d);return this},c.SortedEmitterList.prototype.findInsertionIndex=function(a){var b=this;return c.binarySearch(this.items,function(c){return b.sortingCallback(a,c)},!0)},c.Registry=function(){c.EventEmitter.call(this),this.registry={}},c.mixinClass(c.Registry,c.EventEmitter),c.Registry.prototype.register=function(a,b){var c,d;if("string"==typeof a)this.registry[a]=b,this.emit("register",a,b);else{if(!Array.isArray(a))throw new Error("Name must be a string or array, cannot be a "+typeof a);for(c=0,d=a.length;d>c;c++)this.register(a[c],b)}},c.Registry.prototype.unregister=function(a){var b,c,d;if("string"==typeof a)d=this.lookup(a),void 0!==d&&(delete this.registry[a],this.emit("unregister",a,d));else{if(!Array.isArray(a))throw new Error("Name must be a string or array, cannot be a "+typeof a);for(b=0,c=a.length;c>b;b++)this.unregister(a[b])}},c.Registry.prototype.lookup=function(a){return d.call(this.registry,a)?this.registry[a]:void 0},c.Factory=function(){c.Factory.parent.call(this)},c.inheritClass(c.Factory,c.Registry),c.Factory.prototype.register=function(a){var b;if("function"!=typeof a)throw new Error("constructor must be a function, cannot be a "+typeof a);if(b=a["static"]&&a["static"].name,"string"!=typeof b||""===b)throw new Error("Name must be a string and must not be empty");c.Factory.parent.prototype.register.call(this,b,a)},c.Factory.prototype.unregister=function(a){var b;if("function"!=typeof a)throw new Error("constructor must be a function, cannot be a "+typeof a);if(b=a["static"]&&a["static"].name,"string"!=typeof b||""===b)throw new Error("Name must be a string and must not be empty");c.Factory.parent.prototype.unregister.call(this,b)},c.Factory.prototype.create=function(a){var b,c,d=[],e=this.lookup(a);if(!e)throw new Error("No class registered by that name: "+a);for(c=1;c<arguments.length;c++)d.push(arguments[c]);return b=f(e.prototype),e.apply(b,d),b},"undefined"!=typeof module&&module.exports?module.exports=c:a.OO=c}(this);
//# sourceMappingURL=oojs.min.js.map